**Замыкание** — это особый вид функции. Она определена в теле другой функции и создаётся каждый раз во время её выполнения. Синтаксически это выглядит как функция, находящаяся целиком в теле другой функции. При этом вложенная внутренняя функция содержит ссылки на локальные переменные внешней функции. Каждый раз при выполнении внешней функции происходит создание нового экземпляра внутренней функции, с новыми ссылками на переменные внешней функции.

```js
function outer() {
	var outerVar;

	var func = function() {
		var innerVar
		...
		x = innerVar + outerVar
	}
	return func
}
```

**Замыкание** — это функция, захватывающая лексическое окружение того контекста, *где она создана*. В дальнейшем это окружение используется для разрешения идентификаторов.

> Функция вызывается во вновь созданном окружении активации, которое содержит локальные переменные и аргументы. Родительское окружение устанавливается в захваченное окружение функции, реализуя семантику лексической области видимости.

> проблема *восходящего фунарга* возникает при возврате функции из некоторой функции
> проблема *нисходящего фунарга* — при передаче функции в качестве параметра некоторой функции.

__Нисходящая фунарг-проблема__

```js
let x = 10;
 
function foo() {
  console.log(x);
}
 
function bar(funArg) {
  let x = 20;
  funArg(); // 10, но не 20!
}
 
// Передаем `foo` в качестве аргумента в `bar`.
bar(foo);
```

__Восходящая фунарг-проблема__

```js
function foo() {
  let x = 10;
 
  // Замыкание, захватываем окружение `foo`.
  function bar() {
    return x;
  }
 
  // Восходящий фунарг.
  return bar;
}
 
let x = 20;
 
// Вызов `foo` возвращает замыкание `bar`.
let bar = foo();
 
bar(); // 10, но не 20!
```